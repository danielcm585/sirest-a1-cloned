{% extends 'base.html' %}
{% load static %}

{% block content %}

{% if step == 1 %}

<div class="flex justify-center">
  <div class="w-11/12">
    <div class="flex justify-center">
      <div class="absolute z-[-10] mt-[20px] w-[300px] h-[2px] bg-indigo-500"></div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] rounded-full bg-indigo-500 flex justify-center items-center">
            <p class="text-white">1</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Alamat</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">2</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Restoran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">3</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Menu</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">4</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pembayaran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">5</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pengantaran</p>
      </div>
    </div>
    <h1 class="mt-6 text-3xl font-bold text-indigo-600">
      Pilih Alamat
    </h1>
    <div class="mt-6">
      <p class="text-lg">Jalan</p>
      <input id="street" type="text" name="street" class="w-full rounded-lg">
      <p class="mt-4 text-lg">Kecamatan</p>
      <input id="district" type="text" name="district" class="w-full rounded-lg">
      <p class="mt-4 text-lg">Kota</p>
      <input id="city" type="text" name="city" class="w-full rounded-lg">
      <p class="mt-4 text-lg">Provinsi</p>
      <select id="province" type="text" name="province" class="w-full rounded-lg">
        <option value="Nanggroe Aceh Darussalam">Nanggroe Aceh Darussalam</option>
        <option value="Sumatera Utara">Sumatera Utara</option>
        <option value="Sumatera Selatan">Sumatera Selatan</option>
        <option value="Sumatera Barat">Sumatera Barat</option>
        <option value="Bengkulu">Bengkulu</option>
        <option value="Riau">Riau</option>
        <option value="Kepulauan Riau">Kepulauan Riau</option>
        <option value="Jambi">Jambi</option>
        <option value="Lampung">Lampung</option>
        <option value="Bangka Belitung">Bangka Belitung</option>
        <option value="Kalimantan Barat">Kalimantan Barat</option>
        <option value="Kalimantan Timur">Kalimantan Timur</option>
        <option value="Kalimantan Selatan">Kalimantan Selatan</option>
        <option value="Kalimantan Tengah">Kalimantan Tengah</option>
        <option value="Kalimantan Utara">Kalimantan Utara</option>
        <option value="Banten">Banten</option>
        <option value="DKI Jakarta">DKI Jakarta</option>
        <option value="Jawa Barat">Jawa Barat</option>
        <option value="Jawa Tengah">Jawa Tengah</option>
        <option value="Daerah Istimewa Yogyakarta">Daerah Istimewa Yogyakarta</option>
        <option value="Jawa Timur">Jawa Timur</option>
        <option value="Bali">Bali</option>
        <option value="Nusa Tenggara Timur">Nusa Tenggara Timur</option>
        <option value="Nusa Tenggara Barat">Nusa Tenggara Barat</option>
        <option value="Gorontalo">Gorontalo</option>
        <option value="Sulawesi Barat">Sulawesi Barat</option>
        <option value="Sulawesi Tengah">Sulawesi Tengah</option>
        <option value="Sulawesi Utara">Sulawesi Utara</option>
        <option value="Sulawesi Tenggara">Sulawesi Tenggara</option>
        <option value="Sulawesi Selatan">Sulawesi Selatan</option>
        <option value="Maluku Utara">Maluku Utara</option>
        <option value="Maluku">Maluku</option>
        <option value="Papua Barat">Papua Barat</option>
        <option value="Papua">Papua</option>
        <option value="Papua Tengah">Papua Tengah</option>
        <option value="Papua Pegunungan">Papua Pegunungan</option>
        <option value="Papua Selatan">Papua Selatan</option>
        <option value="Papua Barat Daya">Papua Barat Daya</option>

      </select>
    </div>
  </div>
</div>
<div class="fixed bottom-0 w-full p-4">
  <button id="next-step-button" class="w-full bg-indigo-500 py-3 rounded-xl hover:bg-indigo-600 duration-300 text-lg text-white">
    Lanjut
  </button>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(() => {   
    const step = parseInt('{{ step }}')

    $('#next-step-button').click(() => {
      localStorage.setItem('street', $('#street').val())
      localStorage.setItem('district', $('#district').val())
      localStorage.setItem('city', $('#city').val())
      localStorage.setItem('province', $('#province').val())
      location.href = `/new-transaction/${step+1}`
    })
  })
</script>

{% elif step == 2 %}

<div class="flex justify-center">
  <div class="w-11/12">
    <div class="flex justify-center">
      <div class="absolute z-[-10] mt-[20px] w-[300px] h-[2px] bg-indigo-500"></div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/1/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">1</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Alamat</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] rounded-full bg-indigo-500 flex justify-center items-center">
            <p class="text-white">2</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Restoran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">3</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Menu</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">4</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pembayaran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">5</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pengantaran</p>
      </div>
    </div>
    <h1 class="mt-6 text-3xl font-bold text-indigo-600">
      Pilih Restoran
    </h1>
    <div class="mt-6 h-[67vh] overflow-scroll">
      <ul id="restaurants" class="divide-y divide-solid" >
        
      </ul>
    </div>
  </div>
</div>
<div class="fixed bottom-0 w-full p-4 flex">
  <button id="prev-step-button" class="w-full bg-indigo-100 py-3 rounded-xl hover:bg-indigo-200 duration-300 text-lg text-indigo-600">
    Kembali
  </button>
  <button id="next-step-button" class="ml-4 w-full bg-indigo-500 py-3 rounded-xl hover:bg-indigo-600 duration-300 text-lg text-white">
    Lanjut
  </button>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(() => {
    const step = parseInt('{{ step }}')

    let chosenRname = ''
    let chosenRbranch = ''

    const fixStr = (str) => {
      return str.replaceAll(/[^a-zA-Z0-9 ]/g, '').replaceAll(' ','-').toLowerCase()
    }

    $.get('/api/restaurant/', (restaurants) => {
      restaurants.forEach((restaurant) => {
        const rname = fixStr(restaurant.rname)
        const rbranch = fixStr(restaurant.rbranch)
        $('#restaurants').append(`
          <li id="restaurant-${rname}-${rbranch}" class="p-4 text-xl font-semibold hover:bg-gray-100 duration-300">
            <h1 class="text-lg">
              ${restaurant.rname} - ${restaurant.rbranch}
            </h1>
            <p class="text-sm text-gray-400">
              ${restaurant.street}, ${restaurant.district}, ${restaurant.city}, ${restaurant.province}
            </p>
            <div class="flex items-center">
              <img src="{% static 'svg/star.svg' %}" class="w-4 h-4" />
              <p class="ml-1 mt-[2px] text-sm">
                ${restaurant.rating}
              </p>
            </div>
          </li>
        `)
        $(`#restaurant-${rname}-${rbranch}`).click(() => {
          if (chosenRname != '') {
            $(`#restaurant-${chosenRname}-${chosenRbranch}`).removeClass('bg-gray-200')
            $(`#restaurant-${chosenRname}-${chosenRbranch}`).removeClass('hover:bg-gray-300')
          }
          chosenRname = rname
          chosenRbranch = rbranch
          $(`#restaurant-${chosenRname}-${chosenRbranch}`).addClass('bg-gray-200')
          $(`#restaurant-${chosenRname}-${chosenRbranch}`).addClass('hover:bg-gray-300')
          localStorage.setItem('rname', restaurant.rname)
          localStorage.setItem('rbranch', restaurant.rbranch)
        })
      })
    })

    $('#next-step-button').click(() => {
      location.href = `/new-transaction/${step+1}`
    })
    
    $('#prev-step-button').click(() => {
      location.href = `/new-transaction/${step-1}`
    })
  })
</script>

{% elif step == 3 %}

<div class="flex justify-center">
  <div class="w-11/12">
    <div class="flex justify-center">
      <div class="absolute z-[-10] mt-[20px] w-[300px] h-[2px] bg-indigo-500"></div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/1/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">1</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Alamat</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/2/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">2</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Restoran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] rounded-full bg-indigo-500 flex justify-center items-center">
            <p class="text-white">3</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Menu</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">4</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pembayaran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">5</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pengantaran</p>
      </div>
    </div>
    <h1 class="mt-6 text-3xl font-bold text-indigo-600">
      Pilih Menu
    </h1>
    <div class="mt-6 h-[67vh] overflow-scroll">
      <ul id="menus" class="divide-y divide-solid">
        
      </ul>
    </div>
  </div>
</div>
<div class="fixed bottom-0 w-full p-4 flex">
  <button id="prev-step-button" class="w-full bg-indigo-100 py-3 rounded-xl hover:bg-indigo-200 duration-300 text-lg text-indigo-600">
    Kembali
  </button>
  <button id="next-step-button" class="ml-4 w-full bg-indigo-500 py-3 rounded-xl hover:bg-indigo-600 duration-300 text-lg text-white">
    Lanjut
  </button>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(() => {
    const step = parseInt('{{step}}')

    const chosenRname = localStorage.getItem('rname')
    const chosenRbranch = localStorage.getItem('rbranch')
    let menuList = []

    const parseIdr = (amount) => {
      return "IDR "+amount.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ".") +",00"
    }

    const fixStr = (str) => {
      return str.replaceAll(/[^a-zA-Z0-9 ]/g, '').replaceAll(' ','-').toLowerCase()
    }

    $.get(`/api/restaurant-menu/${chosenRname}/${chosenRbranch}/`, (menus) => {
      menuList = menus
      menus.forEach((menu) => {
        const foodname = fixStr(menu.foodname)
        $('#menus').append(`
          <li id="menu-${foodname}" class="p-4 hover:bg-gray-100 duration-300">
            <div class="flex justify-between items-center">
              <div>
                <h1 class="text-lg font-semibold">
                  ${menu.foodname}
                </h1>
                <h2 class="text-sm text-indigo-600">
                  ${parseIdr(menu.price)}
                </h2>
              </div>
              <div class="flex">
                <button disabled id="dec-quantity-menu-${foodname}-button" class="w-[30px] h-[30px] rounded-lg shadow-md bg-gray-100 duration-300">
                  -
                </button>
                <div class="ml-2 flex justify-center items-center">
                  <p id="menu-${foodname}-quantity">0</p>
                </div>
                <button id="inc-quantity-menu-${foodname}-button" class="ml-2 w-[30px] h-[30px] rounded-lg shadow-md bg-indigo-100 hover:bg-indigo-200 duration-300">
                  +
                </button>
              </div>
            </div>
            <input id="menu-${foodname}-notes" type="text" placeholder="Add notes" class="mt-2 h-[30px] w-full bg-indigo-50 rounded-lg border-0">
          </li>
        `)
        $(`#dec-quantity-menu-${foodname}-button`).click(() => {
          let quantity = parseInt($(`#menu-${foodname}-quantity`).text())
          quantity--
          if (quantity == 0) {
            $(`#dec-quantity-menu-${foodname}-button`).removeClass('bg-indigo-100')
            $(`#dec-quantity-menu-${foodname}-button`).removeClass('hover:bg-indigo-200')
            $(`#dec-quantity-menu-${foodname}-button`).addClass('bg-gray-100')
            $(`#dec-quantity-menu-${foodname}-button`).attr('disabled','disabled')
          }
          $(`#menu-${foodname}-quantity`).text(quantity)
        })
        $(`#inc-quantity-menu-${foodname}-button`).click(() => {
          let quantity = parseInt($(`#menu-${foodname}-quantity`).text())
          quantity++
          if (quantity == 1) {
            $(`#dec-quantity-menu-${foodname}-button`).removeClass('bg-gray-100')
            $(`#dec-quantity-menu-${foodname}-button`).addClass('bg-indigo-100')
            $(`#dec-quantity-menu-${foodname}-button`).addClass('hover:bg-indigo-200')
            $(`#dec-quantity-menu-${foodname}-button`).removeAttr('disabled')
          }
          $(`#menu-${foodname}-quantity`).text(quantity)
        })
      })
    })

    $('#next-step-button').click(() => {
      const orders = []
      menuList.forEach((menu) => {
        const foodname = fixStr(menu.foodname)
        const amount = parseInt($(`#menu-${foodname}-quantity`).text())
        const notes = $(`#menu-${foodname}-notes`).val()
        if (amount > 0) orders.push({ 
          foodname: menu.foodname, 
          amount: amount, 
          note: notes 
        })
      })
      localStorage.setItem('orders', JSON.stringify(orders))
      location.href = `/new-transaction/${step+1}`
    })
    
    $('#prev-step-button').click(() => {
      location.href = `/new-transaction/${step-1}`
    })
  })
</script>

{% elif step == 4 %}

<div class="flex justify-center">
  <div class="w-11/12">
    <div class="flex justify-center">
      <div class="absolute z-[-10] mt-[20px] w-[300px] h-[2px] bg-indigo-500"></div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/1/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">1</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Alamat</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/2/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">2</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Restoran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/3/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">3</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Menu</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] rounded-full bg-indigo-500 flex justify-center items-center">
            <p class="text-white">4</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pembayaran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">5</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pengantaran</p>
      </div>
    </div>
    <h1 class="mt-6 text-3xl font-bold text-indigo-600">
      Pilih Pembayaran
    </h1>
    <div class="mt-6">
      <p class="mt-4 text-lg">Metode Pembayaran</p>
      <select id="payment-method-select" type="text" name="payment-method" class="w-full rounded-lg">
        
      </select>
    </div>
  </div>
</div>
<div class="fixed bottom-0 w-full p-4 flex">
  <button id="prev-step-button" class="w-full bg-indigo-100 py-3 rounded-xl hover:bg-indigo-200 duration-300 text-lg text-indigo-600">
    Kembali
  </button>
  <button id="next-step-button" class="ml-4 w-full bg-indigo-500 py-3 rounded-xl hover:bg-indigo-600 duration-300 text-lg text-white">
    Lanjut
  </button>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(() => {
    const step = parseInt('{{step}}')

    $.get('/api/payment-method/', (methods) => {
      methods.forEach((method) => {
        $('#payment-method-select').append(`
          <option value="${method.id}">${method.name}</option>
        `)
      })
    })

    $('#next-step-button').click(() => {
      localStorage.setItem('pmid', $('#payment-method-select').val())
      location.href = `/new-transaction/${step+1}`
    })
    
    $('#prev-step-button').click(() => {
      location.href = `/new-transaction/${step-1}`
    })
  })
</script>

{% elif step == 5 %}
  
<div class="flex justify-center">
  <div class="w-11/12">
    <div class="flex justify-center">
      <div class="absolute z-[-10] mt-[20px] w-[300px] h-[2px] bg-indigo-500"></div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/1/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">1</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Alamat</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/2/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">2</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Restoran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/3/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">3</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Menu</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div onclick="location.href='/new-transaction/4/'" class="h-[40px] w-[40px] border-[2px] border-indigo-500 rounded-full bg-white flex justify-center items-center">
            <p class="text-indigo-500">4</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pembayaran</p>
      </div>
      <div class="w-[80px]">
        <div class="flex justify-center">
          <div class="h-[40px] w-[40px] rounded-full bg-indigo-500 flex justify-center items-center">
            <p class="text-white">5</p>
          </div>
        </div>
        <p class="mt-1 text-center text-xs">Pengantaran</p>
      </div>
    </div>
    <h1 class="mt-6 text-3xl font-bold text-indigo-600">
      Pilih Pengantaran
    </h1>
    <div class="mt-6">
      <p class="mt-4 text-lg">Metode Pengantaran</p>
      <select id="courier-type-select" type="text" name="payment-method" class="w-full rounded-lg">
        <option value="Motor">Motor</option>
        <option value="Mobil">Mobil</option>
      </select>
    </div>
  </div>
</div>
<div class="fixed bottom-0 w-full p-4 flex">
  <button id="prev-step-button" class="w-full bg-indigo-100 py-3 rounded-xl hover:bg-indigo-200 duration-300 text-lg text-indigo-600">
    Kembali
  </button>
  <button id="new-transaction-button" class="ml-4 w-full bg-indigo-500 py-3 rounded-xl hover:bg-indigo-600 duration-300 text-lg text-white">
    Selesai
  </button>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(() => {
    const step = parseInt('{{step}}')

    $('#new-transaction-button').click(() => {
      const street = localStorage.getItem('street')
      const district = localStorage.getItem('district')
      const city = localStorage.getItem('city')
      const province = localStorage.getItem('province')
      const pmid = localStorage.getItem('pmid')
      const courierType = $('#courier-type-select').val()
      const orders = JSON.parse(localStorage.getItem('orders'))
      const rname = localStorage.getItem('rname')
      const rbranch = localStorage.getItem('rbranch')
      
      $.ajax({
        url: '/api/transaction/',
        type: 'POST',
        dataType: 'json',
        data: {
          street: street,
          district: district,
          city: city,
          province: province,
          pmid: pmid,
          courierType: courierType,
          rname: rname,
          rbranch: rbranch,
          orders: orders,
        },
        success: (transaction) => {
          datetime = transaction.datetime.replace('T',' ')
          location.href = `/transaction-review/${transaction.email}/${datetime}/`
        },
        error: (err) => {
          alert(err)
        }
      })
    })

    $('#prev-step-button').click(() => {
      location.href = `/new-transaction/${step-1}`
    })
  })
</script>

{% endif %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(() => {
    const step = parseInt('{{step}}')
  })
</script>

<script src="https://cdn.tailwindcss.com"></script>
<script>
  const buttons = document.querySelectorAll('button');
  buttons.forEach((btn) => {
    btn.addEventListener('click', function(e) {
      const x = e.clientX - this.offsetLeft;
      const y = e.clientY - this.offsetTop + window.pageYOffset;
      const ripples = document.createElement('span');
      ripples.className = `left-[${x}px] top-[${y}px]` + ' absolute bg-white -translate-x-1/2 -translate-y-1/2 rounded-full animate-ripple';
      this.appendChild(ripples);
      setTimeout(() => ripples.remove(), 500);
    })
  })
</script>

{% endblock content %}