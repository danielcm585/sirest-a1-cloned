{% extends 'base.html' %} {% load static %} {% block content %}

<div class="flex justify-center">
  <div class="w-11/12">
    <div class="flex justify-between items-center">
      <div class="flex items-center">
        <img src="{% static 'svg/avatar.svg' %}" class="w-20 h-20" />
        <div class="ml-4">
          <h1 id="name" class="text-2xl font-bold">{{ name }}</h1>
          <h2 id="role" class="text-lg">{{ role }}</h2>
        </div>
      </div>
      <button
        class="logout-button relative px-4 py-2 bg-indigo-100 hover:bg-indigo-200 duration-300 rounded-lg shadow-md text-indigo-600 overflow-hidden tracking-wider"
      >
        Logout
      </button>
    </div>
    <div class="mt-6">
      {% if role == 'Admin' %}
      <div
        class="p-4 pb-3 rounded-3xl bg-indigo-500 grid grid-cols-5 gap-4 shadow-xl"
      >
        <div class="flex-col items-center justify-center">
          <button
            class="relative flex justify-center items-center w-full aspect-square bg-indigo-600 hover:bg-indigo-800 duration-300 rounded-xl overflow-hidden tracking-wider shadow-xl"
          >
            <div class="flex justify-center">
              <img src="{% static 'svg/delivery.svg' %}" class="w-12 h-12" />
            </div>
          </button>
          <p class="font-medium text-white text-center text-sm">Delivery</p>
        </div>
        <div class="flex-col items-center justify-center">
          <button
            onclick="setTimeout(() => location.href='/food-category/', 300)"
            class="relative flex justify-center items-center w-full aspect-square bg-indigo-600 hover:bg-indigo-700 duration-300 rounded-xl overflow-hidden tracking-wider shadow-xl"
          >
            <div class="flex justify-center">
              <img src="{% static 'svg/food.svg' %}" class="w-12 h-12" />
            </div>
          </button>
          <p class="font-medium text-white text-center text-sm">Food</p>
        </div>
        <div class="flex-col items-center justify-center">
          <button
            class="relative flex justify-center items-center w-full aspect-square bg-indigo-600 hover:bg-indigo-700 duration-300 rounded-xl overflow-hidden tracking-wider shadow-xl"
          >
            <div class="flex justify-center">
              <img src="{% static 'svg/restaurant.svg' %}" class="w-12 h-12" />
            </div>
          </button>
          <p class="font-medium text-white text-center text-sm">Restaurant</p>
        </div>
        <div class="flex-col items-center justify-center">
          <button
            class="relative flex justify-center items-center w-full aspect-square bg-indigo-600 hover:bg-indigo-700 duration-300 rounded-xl overflow-hidden tracking-wider shadow-xl"
          >
            <div class="flex justify-center">
              <img src="{% static 'svg/promo.svg' %}" class="w-12 h-12" />
            </div>
          </button>
          <p class="font-medium text-white text-center text-sm">Promo</p>
        </div>
        <div class="flex-col items-center justify-center">
          <button
            class="relative flex justify-center items-center w-full aspect-square bg-indigo-600 hover:bg-indigo-700 duration-300 rounded-xl overflow-hidden tracking-wider shadow-xl"
          >
            <div class="flex justify-center">
              <img src="{% static 'svg/user.svg' %}" class="w-12 h-12" />
            </div>
          </button>
          <p class="font-medium text-white text-center text-sm">User</p>
        </div>
      </div>
      <div style="text-align: center">
        <table
          class="riwayat-table"
          style="
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.9em;
            font-family: sans-serif;
            min-width: 600px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            text-align: center;
            margin-left: auto;
            margin-right: auto;
          "
        >
        <tr style="text-align: left">
          <th>Email:</th>
          <th>{{ user.email }}</th>
          <th></th>
        </tr>
        <tr style="text-align: left">
          <th>Password:</th>
          <th>********</th>
          <th></th>
        </tr>
        <tr style="text-align: left">
          <th>Nama:</th>
          <th>{{ user.user.fname }} {{ user.user.lname }}</th>
          <th></th>
        </tr>
        <tr style="text-align: left">
          <th>Nomor HP:</th>
          <th>{{ user.user.phonenum }}</th>
          <th></th>
        </tr>
        </table>
      </div>

      <table id="riwayat-table-admin"
        class="riwayat-table"
        style="
          border-collapse: collapse;
          margin: 25px 0;
          font-size: 0.9em;
          font-family: sans-serif;
          min-width: 600px;
          box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
          text-align: center;
          margin-left: auto;
          margin-right: auto;
        "
      >
        <tr style="background-color: #8cbcb2; text-align: center">
          <th>Email</th>
          <th>Nama</th>
          <th>Role</th>
          <th>Status</th>
          <th>Aksi</th>
          <th></th>
        </tr>
        <!-- <tr>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th class="flex-row">
            <a href="{% url 'sirest:detail_user' %}">Detail</a>
            <a>Verifikasi</a>
          </th>
          <th class="flex-row"><a>Verifikasi</a> <a></a></th>
        </tr> -->
      </table>
      {% elif role == 'Kurir' %}

      <div style="text-align: center">
        <table
          class="riwayat-table"
          style="
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.9em;
            font-family: sans-serif;
            min-width: 600px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            text-align: center;
            margin-left: auto;
            margin-right: auto;
          "
        >
        <tr style="text-align: left">
          <th>Email:</th>
          <th>{{ user.email }}</th>
          <th></th>
        </tr>
        <tr style="text-align: left">
          <th>Password:</th>
          <th>********</th>
          <th></th>
        </tr>
        <tr style="text-align: left">
          <th>Nama:</th>
          <th>{{ user.user.fname }} {{ user.user.lname }}</th>
          <th></th>
        </tr>
        <tr style="text-align: left">
          <th>Nomor HP:</th>
          <th>{{ user.user.phonenum }}</th>
          <th></th>
        </tr>
          <tr style="text-align: left">
            <th>NIK:</th>
            <th>{{kurir_detail.0.6}}</th>
          </tr>
          <tr style="text-align: left">
            <th>Nama Bank: </th>
            <th>{{kurir_detail.0.7}}</th>
          </tr>
          <tr style="text-align: left">
            <th>Nomor rekening:</th>
            <th>{{kurir_detail.0.8}}</th>
          </tr>
          <tr style="text-align: left">
            <th>Plat Nomor Kendaraan:</th>
            <th>{{kurir_detail.0.1}}</th>
          </tr>
          <tr style="text-align: left">
            <th>Nomor SIM:</th>
            <th>{{kurir_detail.0.2}}</th>
          </tr>
          <tr style="text-align: left">
            <th>Jenis Kendaraan:</th>
            <th>{{kurir_detail.0.3}}</th>
          </tr>
          <tr style="text-align: left">
            <th>Merk Kendaraan:</th>
            <th>{{kurir_detail.0.4}}</th>
          </tr>
          <tr style="text-align: left">
            <th>Status:</th>
            <th>{% if user.transactionactor.adminid == None %} Pending {% else %}
              Terverifikasi {% endif %}</th>
          </tr>
          <tr style="text-align: left">
            <th>Saldo Resto Pay:</th>
            <th>{{kurir_detail.0.9}}</th>
          </tr>
        </table>
      </div>

      {% elif role == 'Restoran' %}

      <div style="text-align: center">
        <table
          class="riwayat-table"
          style="
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.9em;
            font-family: sans-serif;
            min-width: 600px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            text-align: center;
            margin-left: auto;
            margin-right: auto;
          "
        >
          <tr style="text-align: left">
            <th>Email:</th>
            <th>{{ user.email }}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Password:</th>
            <th>********</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Nama:</th>
            <th>{{ user.user.fname }} {{ user.user.lname }}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Nomor HP:</th>
            <th>{{ user.user.phonenum }}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>NIK:</th>
            <th>{{ user.transactionactor.nik }}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Nama Bank:</th>
            <th>{{ user.transactionactor.bankname }}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Nomor rekening:</th>
            <th>{{ user.transactionactor.accountno }}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Nama restoran:</th>
            <th>{{user.rname}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Cabang:</th>
            <th>{{user.rbranch}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Nomor telepon:</th>
            <th>{{user.rphonenum}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Jalan:</th>
            <th>{{user.street}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Kecamatan:</th>
            <th>{{user.district}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Kota:</th>
            <th>{{user.city}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Provinsi:</th>
            <th>{{user.province}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Rating:</th>
            <th>{{user.rating}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Kategori restoran:</th>
            <th>{{user.category}}</th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Jam operasional:</th>
            <th>
              <ul>
                {% for data in ophours %}
                <li>{{data.day}} - {{data.starthours}} : {{data.endhours}}</li>
                {% endfor %}
              </ul>
            </th>
          </tr>
          <tr style="text-align: left">
            <th>Status:</th>
            <th>
              {% if user.transactionactor.adminid == None %} Pending {% else %}
              Terverifikasi {% endif %}
            </th>
            <th></th>
          </tr>
          <tr style="text-align: left">
            <th>Saldo Resto Pay:</th>
            <th>{{ user.transactionactor.restopay }}</th>
            <th></th>
          </tr>
        </table>
      </div>

      {% elif role == 'Pelanggan' %}
      <div
        class="p-4 pb-3 rounded-3xl bg-indigo-500 grid grid-cols-5 gap-4 shadow-xl"
      >
        <div class="flex-col items-center justify-center">
          <button
            onclick="setTimeout(() => location.href='/new-transaction/1/', 300)"
            class="relative flex justify-center items-center w-full aspect-square bg-indigo-600 hover:bg-indigo-800 duration-300 rounded-xl overflow-hidden tracking-wider shadow-xl"
          >
            <div class="flex justify-center">
              <img src="{% static 'svg/order.svg' %}" class="w-12 h-12" />
            </div>
          </button>
          <p class="font-medium text-white text-center text-sm">Order</p>
        </div>
        <div class="flex-col items-center justify-center">
          <button
            class="relative flex justify-center items-center w-full aspect-square bg-indigo-600 hover:bg-indigo-800 duration-300 rounded-xl overflow-hidden tracking-wider shadow-xl"
          >
            <div class="flex justify-center">
              <img src="{% static 'svg/history.svg' %}" class="w-12 h-12" />
            </div>
          </button>
          <p class="font-medium text-white text-center text-sm">History</p>
        </div>
      </div>

      <div style="text-align: center">
        <table
          class="riwayat-table"
          style="
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.9em;
            font-family: sans-serif;
            min-width: 600px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            text-align: center;
            margin-left: auto;
            margin-right: auto;
          "
        >
          <tr style="text-align: left">
            <th>Email:</th>
            <th>{{ user.email }}</th>
          </tr>
          <tr style="text-align: left">
            <th>Password:</th>
            <th>********</th>
          </tr>
          <tr style="text-align: left">
            <th>Nama:</th>
            <th>{{ user.user.fname }} {{ user.user.lname }}</th>
          </tr>
          <tr style="text-align: left">
            <th>Nomor HP:</th>
            <th>{{ user.user.phonenum }}</th>
          </tr>
          <tr style="text-align: left">
            <th>NIK:</th>
            <th>{{ user.transactionactor.nik }}</th>
          </tr>
          <tr style="text-align: left">
            <th>Nama Bank:</th>
            <th>{{ user.transactionactor.bankname }}</th>
          </tr>
          <tr style="text-align: left">
            <th>Nomor rekening:</th>
            <th>{{ user.transactionactor.accountno }}</th>
          </tr>
          <tr style="text-align: left">
            <th>Tanggal Lahir:</th>
            <th>{{ user.birthdate }}</th>
          </tr>
          <tr style="text-align: left">
            <th>Jenis Kelamin:</th>
            <th>{{ user.sex }}</th>
          </tr>
          <tr style="text-align: left">
            <th>Status:</th>
            <th>
              {% if user.transactionactor.adminid == None %} Pending {% else %}
              Terverifikasi {% endif %}
            </th>
          </tr>
          <tr style="text-align: left">
            <th>Saldo Resto Pay:</th>
            <th>{{ user.transactionactor.restopay }}</th>
          </tr>
        </table>
      </div>

      {% endif %}
    </div>
  </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(() => {
    $(".logout-button").click(() => {
      setTimeout(() => {
        $.ajax({
          url: "/api/logout/",
          method: "GET",
          dataType: "json",
          success: (resp) => {
            location.href = "/";
          },
          error: () => {
            alert("Logout gagal");
          },
        });
      }, 300);
    });

    $.get('/api/dashboard/admin', (trActors) => {
      trActors.forEach((actor) => {
        console.log(actor)
        $('#riwayat-table-admin').append(`
        <tr>
          <th>${actor.email}</th>
          <th>${actor.nama}</th>
          <th>${actor.role}</th>
          <th>${actor.adminid == null ? "Pending" : "Terverifikasi"}</th>
          <th class="flex-row">
            <a href="{% url 'sirest:detail_user' %}">Detail</a>
            <a>Verifikasi</a>
          </th>
          <th class="flex-row"><a>Verifikasi</a> <a></a></th>
        </tr>
        `)});})
  });
</script>

<script src="https://cdn.tailwindcss.com"></script>
<script>
  const buttons = document.querySelectorAll("button");
  buttons.forEach((btn) => {
    btn.addEventListener("click", function (e) {
      const x = e.clientX - this.offsetLeft;
      const y = e.clientY - this.offsetTop + window.pageYOffset;
      const ripples = document.createElement("span");
      ripples.className =
        `left-[${x}px] top-[${y}px]` +
        " absolute bg-white -translate-x-1/2 -translate-y-1/2 rounded-full animate-ripple";
      this.appendChild(ripples);
      setTimeout(() => ripples.remove(), 500);
    });
  });
</script>

{% endblock content %}
